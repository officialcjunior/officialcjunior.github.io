<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>The Bus Pirate manual | Aswin's blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css></head><body><nav><ul class=menu><li><a href=/>home</a></li><li><a href=/tech/>technical talks and projects</a></li><li><a href=/art/>art portfolio</a></li><li><a href=/bookshelf/>bookshelf</a></li><li><a href=/tweets/>tweets and further reading</a></li><li><a href=/about/>about</a></li></ul><hr></nav><div class=article-meta><h2><span class=title>The Bus Pirate manual</span></h2><h4 class=author>Aswin</h4><h5 class=date>2020-01-17</h5></div><main><p>A simple manual to help you start working with your <a href=http://dangerousprototypes.com/docs/Bus_Pirate>Bus Pirate</a>.</p><h2 id=useful-links>Useful links</h2><p>To learn about what the device can do for you, I&rsquo;d suggest starting somewhere near <a href=https://learn.sparkfun.com/tutorials/bus-pirate-v36a-hookup-guide/all>Sparkfun&rsquo;s article</a> or the <a href=http://dangerousprototypes.com/docs/Bus_Pirate_102_tutorial>Bus Pirate 102 manual</a></p><h2 id=flashing-the-firmware>Flashing the firmware</h2><p>After connecting the Bus Pirate, and cloning the <a href=https://github.com/BusPirate/Bus_Pirate>Bus Pirate repository</a>, simply navigate to the folder <code>package</code>. You should know about the version of the Bus Pirate you own and navigate to the corresponding folder</p><p>You can flash the firmware using the <code>pirate-loader</code>, which is an executable file present in the folder.</p><p>It requires only the firmware hex file and the device port name as arguments.</p><p>So, if you are running a Linux distribution, you can flash the firmware through the terminal, just by running:</p><p><code>chmod +x ./pirate-loader_lnx</code>
<code>./pirate-loader_lnx --dev=/dev/ttyUSB0 --hex=firmware.hex</code></p><p>Where, <code>/dev/ttyUSB0</code> is the port to which the Bus Pirate is connected.
And <code>firmare.hex</code> will be the filename of the firmware, which you want to flash.</p><p>Keep in mind that you have to connect the PGC and PGD pins of the Bus Pirate using a jumper cable to trigger the Bus Pirate bootloader. This is will make the MODE LED turn on.</p><h2 id=interfacing-with-the-bus-pirate>Interfacing with the Bus Pirate</h2><p>The Bus Pirate uses a baud rate of 115200. Using GNU Screen, we can talk to the device just by running:</p><p><code>sudo screen /dev/ttyUSBO 115200</code></p><p>Press enter, and you&rsquo;ll enter a shell with prompt <code>&lt;HiZ></code>. Congratulations! You can now interface with your Bus Pirate.</p><p>I tried to interface the Bus Pirate with <a href=https://pyserial.readthedocs.io/en/latest/tools.html>Miniterm</a>, but I was unable to choose an option from the Mode Menu, as I guess, some data was already being sent and Bus Pirate misunderstood it as an input.</p><h2 id=debugging>Debugging</h2><p>You can use a logic analyzer to see if the wirings are perfect. I used the <a href=https://www.saleae.com/downloads/>Saleae Logic Analyzer</a> to make sure that there&rsquo;s data being sent through the wires.</p><h2 id=uart>UART</h2><p>To, sniff data being sent using the UART protocol, choose 3, from the mode menu.
Then, you&rsquo;ll be asked to set the UART mode, with port speed, data bits per frame, polarity, stop bits and output type.
Go with the default options, unless you&rsquo;re sure about which one to choose. On the menu where you can set speed, choose the baud rate the chip (of which you are sniffing) use.</p><p>So, use the macro (2), the Live UART monitor to view the data.</p><h2 id=i2c>I2C</h2><p>To get started, connect the MOSI pin of the Buspirate to the SDA pin and the Clock pin to the SCL pin of the circuit.</p><p>To set up the Bus Pirate to read data being sent through I2C, choose 4 from the Mode Menu.</p><p>Set the speed and run the macro (2) to see the data.</p><p>It is also possible to find the addresses of all the I2C chips on the network using the macro (1), as each I2C chip addressis a 7 bit address and there can only be 128 unique devices on the same wire.</p><h2 id=spi>SPI</h2><p>Connect MOSI and MISO of the Bus Pirate to the MOSI and MISO of the circuit. You&rsquo;ll also need to connect pins for the Chip Select and the Clock Signal. Don&rsquo;t forget about grounding it commonly.</p><p>Choose the SPI mode from the Mode menu and go with the default settings for everything except the speed, unless you&rsquo;re really sure about what you&rsquo;re doing.</p><h3 id=good-luck-hacking>Good luck hacking!</h3></main><footer><script src=//yihui.org/js/math-code.js></script><script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script async src=//yihui.org/js/center-img.js></script><hr>Aswin&rsquo;s blog<br><a href=/index.xml>RSS Feed</a></footer></body></html>